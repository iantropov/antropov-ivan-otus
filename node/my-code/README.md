# Project Work: MyCode

## DevCycle

```
npm run start:dev
```

```
npm run build
NODE_ENV=production node dist/main
```

## Links

https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-1

## Roadmap

Сущности:
- User
  - id: number
  - name: string
  - email: sting
  - role: {id: number, name: role}
  - favouriteProblems: number[]
- Problem
  - id: number
  - categories: [{id: number, name: string}]
  - description: string
  - summary: string
  - solution: string

Админ заводится при старте системы

Use Cases:
- Регистрация пользователя
- Логин пользователя
- Под админом:
  - просмотр категорий
  - просмотр пользователей
  - удаление пользователей
  - просмотр задач
  - добавление задач
  - редактирование задач
  - удаление задач
  - добавление в избранные
  - удаление из избранного
- Под пользователем
  - Просмотр задач
  - добавление в избранное
  - удаление из избранного

Roadmap:
- бэкенд - 20ч (10 часов - выходные + след.неделя, 3 + 8 часов - 1я отпускная неделя) - 21.10 - 06.11
  + сделать скелет проекта
  + завести пользователей
  + завести задачи
  + подключить GraphQL
  + сделать резолверы
  + сделать аутентификацию/авторизацию через jwt и заголовки
  + сделать логаут
  + добавить любимые задачи
  + добавить категории
  - обработка невалидного ID (например, 1)
  - обработка ошибок GraphQL
  - добавить хранение сессий в редис
  - добавить логаут и протухание сессий (ttl)
  - валидация на уникальный email
  - сделать solution опциональным
  - добавить логирование БД и посмотреть на запросы связей
  - убрать JWT_SECRET в окружение
- фронтенд - 20ч (12 + 7.5 часов - 2я отпускная неделя) 07.11 - 13.11
  + завести фронт на nextjs
  + подключить apollo client
  + сделать страницу логина
  + сделать логаут
  + подключить bootstrap
  + сделать layout приложения
  + завезти заголовок дологина
  + завезти заголовок залогина
  + сделать футер
  + сделать страницу регистрации
  + сделать страницу задач
    - https://getbootstrap.com/docs/5.2/examples/list-groups/#
    - https://getbootstrap.com/docs/5.2/components/collapse/
  + сделать страницу любимых задач
  + сделать заголовок админа
  + сделать страницу пользовалей
  + сделать удаление пользователя
  + сделать добавление задачи
  + сделать страницу редактирования задачи
  + сделать удаление задачи
  + переверстать компонент задачи
  + сделать лайк
  - доделать создание задач с категориями
  - доделать вывод задач с категориями
  - добавить текстовый поиск по задачам
  - добавить поиск по категориям задач
  - добавить пагинацию
  - централизовать обработку ошибок apollo (error-link)
  - добавить подтверждение удалений
  - добавить всплывашки об успехе операций
  - отказаться от _id в пользу id на фронте
  Деплой (в качестве последней домашки) - 3 часа


=================================

show databases;
use my-code;
db.users.updateOne({_id: ObjectId("63635a5ac773205aea27306c")}, {$set:{isAdmin: true}})