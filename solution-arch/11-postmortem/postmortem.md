# Проблема с генерацией печатных форм (#123)

## Общая информация

**Дата**: 20.11.23

**Статус**: Исправлено, созданые задачи для снижения рисков появления похожих проблем

**Описание**: Внесённые изменения в печатную форму (ПФ) для одной компании привели к некорректной генерации печатных форм для других компаний

**Влияние**: Были затронуты ПФ 89 контрагентов

**Причины**: Изменения были сделаны стажёром и выглядели разумно на code review. Также при тестировании было проверено, что исправление решает поставленную задачу для нужной компании. Но не было проверено, что ПФ остались корректными для других ПФ.

**Триггер**: Представители контрагентов обратились с жалобой в систему поддержки

**Решение**: Эстренно собрали автора изменений, опытных разработчиков, тестировщика и менеджера проекта для координации решения. Далее изменения были уточнены и исправлены. После чего был произведён незапланированный релиз.

**Обнаружение**: Появился тикет в очереди дежурных задач с приоритетом Blocker.

## Что сделать:

- Расширять покрытие автоматическими тестами регрессии (завели тикет и назначили на исполнителя)
- Подумать над улучшение архитектуры проекта, чтобы похожие вносимые изменения были очевиднее на code review (завели тикет на обсуждение командой)
- Улучшить погружение новых разработчиков и тестировщимов в специфику проекта (завели тикет и назначили на исполнителя)

## Выученные уроки:

_Что пошло хорошо_:

- Комманда поддержки правильно среагировала на жалобу клиента и завела тикет с правильным приоритетом
- Дежурный сервиса оперативно среагировал на появление высокоприоритетного тикета

_Что пошло плохо_:

- Ввиду сложности архитектуры проекта первое исправление было настолько неочевидным для всех (при том, что оно было корректно), что часть команды заблокировало Code Review, пока не разобрались все в решении

_В чём нам повезло_:

- Затронутые клиенты и руководство проявили понимание и терпение, что позволило нам разбираться с проблемой без лишнего внешнего прессинга

## Хронология событий:

_20.11.23:_ **всё время в МСК**

- 12:18 _НАЧАЛО ПРОБЛЕМЫ_ - Релиз версии сервиса с багом
- 13:23 - Служба поддержки регистрирует жалобу от первого клиента и заводит тикет с приоритетом Bug
- 13:31 _НАЧАЛО ИНЦИДЕНТА_ - Служба поддержки региструет аналогичные жалобы от других клиентов и линкует их к существующем тикету, которому поднимает приоритет до Blocker
- 13:45 - Дежурный переключается на созданный тикет
- 13:58 - Дежурный инициирует экстренный созвон команды проекта для координации действий
- 14:15 - На созвоне был принят план решения ситуации и назначены ответственные
- 14:53 - Разработчики приготовили решение
- 15:00 - Дополнительный созвон, чтобы ускорить Code Review, которое затянулось из-за неочевидности решения
- 16:11 - Изменения протестированы и влиты в ветку hotfix
- 16:43 _ОКОНЧАНИЕ ПРОБЛЕМЫ_ - Изменения выкачены во внеочередном релизе
- 16:57 _ОКОНЧАНИЕ ИНЦИДЕНТА_ - Клиенты подтвердили корректность генерируемых ПФ
- 17:30 - Дополнительный созвон для анализа инцидента и понимания, что можно улучшить

## Дополнительная информация:

- Тикет в системе - #123
- Резюме созвонов по решению проблемы
- Чат команды по решению проблемы
-